Origin: upstream, backported from 18.04.0.
Last-Update: 2018-06-18
Forwarded: not-needed
Author: Dmitry Smirnov <onlyjob@debian.org>
Description: fixes FTBFS

--- a/cli/cli/trust/trust.go
+++ b/cli/cli/trust/trust.go
@@ -40,8 +40,10 @@
 	// ActionsPullOnly defines the actions for read-only interactions with a Notary Repository
 	ActionsPullOnly = []string{"pull"}
 	// ActionsPushAndPull defines the actions for read-write interactions with a Notary Repository
 	ActionsPushAndPull = []string{"pull", "push"}
+	// NotaryServer is the endpoint serving the Notary trust server
+	NotaryServer = "https://notary.docker.io"
 )
 
 // GetTrustDirectory returns the base trust directory name
 func GetTrustDirectory() string {
@@ -70,9 +72,9 @@
 
 		return s, nil
 	}
 	if index.Official {
-		return registry.NotaryServer, nil
+		return NotaryServer, nil
 	}
 	return "https://" + index.Name, nil
 }
 
--- a/cli/cli/command/image/trust_test.go
+++ b/cli/cli/command/image/trust_test.go
@@ -6,9 +6,8 @@
 	"testing"
 
 	"github.com/docker/cli/cli/trust"
 	registrytypes "github.com/docker/docker/api/types/registry"
-	"github.com/docker/docker/registry"
 	"github.com/gotestyourself/gotestyourself/assert"
 	"github.com/theupdateframework/notary/client"
 	"github.com/theupdateframework/notary/passphrase"
 	"github.com/theupdateframework/notary/trustpinning"
@@ -46,10 +45,10 @@
 
 func TestOfficialTrustServer(t *testing.T) {
 	indexInfo := &registrytypes.IndexInfo{Name: "testserver", Official: true}
 	output, err := trust.Server(indexInfo)
-	if err != nil || output != registry.NotaryServer {
-		t.Fatalf("Expected server to be %s, got %s", registry.NotaryServer, output)
+	if err != nil || output != trust.NotaryServer {
+		t.Fatalf("Expected server to be %s, got %s", trust.NotaryServer, output)
 	}
 }
 
 func TestNonOfficialTrustServer(t *testing.T) {
